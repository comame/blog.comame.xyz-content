Chrome OS には、Windows のファイル共有 (SMB) にアクセスできる機能が標準で組み込まれている。従来 (2019 年頃まで？) は拡張機能をインストールする必要があったようだが、現在は「ファイル」アプリで初めから使用できるようになっている。

## ファイル共有を有効にする

Windows で、ファイル共有の設定をする。共有したいディレクトリを右クリックし、「アクセスを許可する」>「特定のユーザー」と進む。「ネットワークアクセス」ダイアログが開くので、共有したいユーザーを設定し、「共有」をクリックする。Windows 11 では、右クリックメニューの「その他のオプションを表示」をクリックすると「アクセスを許可する」の項目が表示されるようになる。

次に、アクセスするためのネットワークパスを調べる。先程共有の設定をしたディレクトリのプロパティを開き、「共有」タブへ移動する。「ネットワーク パス」という項目を控える。表示されるネットワークパスは `\\[コンピュータ名]\[フォルダ名]` という形式になっている。

必要に応じてファイアウォールやルータの設定をする (SMB のポートをインターネットに公開するのはやめたほうが良いと思う)。

## Chromebook から接続する

Chromebook の「ファイル」アプリを開き、右上の三点メニューをクリックし、「サービス」>「SMB ファイル共有」を開く。

「ファイル共有 URL」には Windows に表示されたネットワークパスを入力する。ただし、「共有フォルダのマウントエラー。指定された共有フォルダがネットワークで見つかりませんでした。」のエラーが表示されるときは、ネットワークパスを `\\[Windows マシンの IP アドレス]\[フォルダ名]` と置き換える。例えば、Windows に表示されたネットワークパスが `\\Desktop-ABC\Share` で、Windows マシンの IP アドレスが 192.168.0.100 であるならば、`\\192.168.0.100\Share` と置き換える。

「ユーザー名」には Windows のユーザー名を入力する。スタートメニューやログインがメインに表示されるフルネームではなく、「コンピュータの管理」の「ローカル ユーザーとグループ」>「ユーザー」に表示される「名前」を入力する。(Windows の仕様に詳しくないので不正確な可能性があるが、この名前はユーザーディレクトリのディレクトリ名と同じだと思われる)。

「パスワード」には Windows のパスワードを入力する。Microsoft アカウントでのサインインにしているときは、Microsoft アカウントのパスワードを入力する必要がある (PIN ではない)。

## 感想

Chrome OS が SMB に対応していることに気付くまでは WSL 2 に立てた SSH サーバに向けて Crostini から SFTP でファイルの転送をしていたので、作業が大幅に効率化されることになり、Chromebook の機動力をより活かすことができるようになったと思う。
