## どういうこと

VRoid Studio でアバターを作って、kalidoface 3D で動かそう！

<video src='/img/2022-become-avatar/preview.webm' controls autoplay></video>

## 必要なもの

- ブラウザ (少なくとも Chrome では動作確認済み)
- OBS
- VRoid Studio (アバターを自作するなら)

## Kalidoface 3D を試そう

[Kalidoface 3D](https://3d.kalidoface.com/) とは、VRM 形式のアバターをブラウザで動かすことのできる Web ツールです。PC のカメラを使ったフェイストラッキング、フルボディトラッキングに対応しています。フェイストラッキングはかなり精度が高く、カメラに向かって正面を向いていれば、正確に瞬きや口の動きを捉えてくれます。サンプルアバターも用意されており、手軽に試すことができます。

まず、ブラウザで <https://3d.kalidoface.com/> にアクセスすると、何もせずともサンプルアバターが表示されます。

![Kalidoface 3D の説明](/img/2022-become-avatar/kalidoface-explain.jpg)

1. アバターの切り替え (サンプルアバターも選べる)
2. 設定ボタン (押すと画像左側の設定項目が表示される)
3. 左からフェイストラッキング、フルボディトラッキングの切り替え
4. カメラの選択

これでアバターを動かすための準備は完了です！

次に、実際にアバターを動かし、さらに OBS にアバターを移すための準備をしていきましょう。

![Kalidoface 3D の説明](/img/2022-become-avatar/kalidoface-explain.2.jpg)

1. トラッキング開始ボタン
2. 背景の切り替えボタン (押すと画像左側のメニューが表示される)
3. 背景をグリーンバックにする

以上で Kalidoface 3D の準備は終わりです。次に、アバターをビデオ会議アプリに映すために OBS の設定をしていきましょう。

## OBS の設定

アバターを表示させるためのソースとして、ウィンドウキャプチャでブラウザのウィンドウを取り込みます。このとき、「ウィンドウの一致優先順」は「ウィンドウのタイトルに一致する必要があります」を選択することをお勧めします。うっかり別のウィンドウが映りこんでしまう事故を防ぐためです。

次に、グリーンバックを切り抜きます。追加したウィンドウキャプチャに対して、「クロマキー」フィルタを追加します。今回はグリーンバックなので、「色キーの種類」は「緑」です。アバターの色合いに合わせて背景色を変える必要があるかもしれません。

あとは「仮想カメラ開始」を押し、好きなビデオ会議アプリで入力カメラを「OBS Virtual Camera」にするだけです。

## VRoid Studio

VRoid Studio とは、3D モデリングの知識がなくとも、自分のアバターを作成することができるソフトです。[VRoid Studio の公式サイト](https://vroid.com/studio) からインストールできます。

VRoid Studio からは VRM 形式でアバターをエクスポートでき、Kalidoface 3D を含む様々なツールでアバターを使うことができます。自分で作ることが難しくても、[BOOTH](https://booth.pm/ja) などで購入した服に着せ替えることができます。

## 最後に

通話するときにカメラをつけるのが恥ずかしくても、アバターなら解決できます。自分のアバターを通じて、新たなコミュニケーションのきっかけになるかもしれません。

サンプルアバターを動かしてみるだけでも、あるいはアセットを着せ替えるだけでも、それは立派な表現の一つです。ぜひ皆さんも試してみてください。

![アバターで笑顔を作るのは難しい](/img/2022-become-avatar/smile.png)

## トラブルシューティング

### Kalidoface 3D でカメラが選択できない

接続しているカメラが選択できないときは、ブラウザの設定でカメラへのアクセス権を許可してください。

### Kalidoface 3D のアバターが動かなくなる

Kalidoface 3D が動いているブラウザのタブが非アクティブになると、自動的に停止します。Kalidoface 3D のタブが常に見えるようにしてください。

また、長い時間動かしたままにしておくと、なぜかアバターが動かなくなることがあります。諦めてタブを再読み込みしましょう。
